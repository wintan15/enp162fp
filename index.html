<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
    <meta charset="utf-8">
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
    <link rel="stylesheet" href="css/reset.css" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Economica:300' rel='stylesheet' type='text/css'>
<script type ="text/javascript">
	function enable(){
		var options = document.getElementById("presets").selectedIndex;
	 	 var ld = document.getElementById("loudness");
	 	 var qlty = document.getElementById("quality");
	 	 var crwd = document.getElementById("crowd");
	 	 var lux = document.getElementById("brightness");
		switch (options){
			case 0:
				ld.value = "";
				qlty.value = "";
				crwd.value = "";
				lux.value = "";
				break;
			case 1://Studying
				ld.value = "30";
				qlty.value = "50";
				crwd.value = "10";
				lux.value = "70";
				break;
			case 2://Eating
				ld.value = "70";
				qlty.value = "80";
				crwd.value = "70";
				lux.value = "70";
				break;
			case 3://Relaxing
				ld.value = "30";
				qlty.value = "50";
				crwd.value = "10";
				lux.value = "40";
				break;
			case 4://Singing
				ld.value = "50";
				qlty.value = "60";
				crwd.value = "60";
				lux.value = "40";
				break;
			case 5://Sleeping
				ld.value = "0";
				qlty.value = "50";
				crwd.value = "0";
				lux.value = "0";
				break;
		}


	}
</script>
   
 </head>

 <body>
	<!--wrap(s)-->



		<!--header(s)-->
		<div class="header">
			<ul>
				<li>Sign up</li>
				<li>|</li>
				<li>Log In</li>
			</ul>
			<a><img src="image/logo.png"></a>
			<span><img src="image/scroll.png"></span>
		</div>

		<!--header(e)-->
		<div class="quote">"Find the Space that Suits Your Needs!"</div>
		<!--content(s)-->
		<div class="content">
				<div class="maps">
					<iframe src="https://tuftsgis.maps.arcgis.com/apps/Embed/index.html?webmap=df28ba5357624efc9f81b564e64b7b75&extent=-71.1226,42.4026,-71.1113,42.408&zoom=true&previewImage=false&scale=true&legendlayers=true&disable_scroll=true&theme=light" allowfullscreen>
					</iframe>
				</div>
				<div class="time">
					<H2>Your Preset</H2>
					<h3>1. Select your time period</h3>
					<div class="selects">
					  <select id = "time">
					    <option value="0">Select</option>
					    <option value="1">Morning (9am - 12pm)</option>
					    <option value="2">Lunch (12pm - 3pm)</option>
					    <option value="3">Afternoon (3pm - 5.30pm)</option>
					    <option value="4">Evening (5.30pm - 8pm)</option>
					    <option value="5">Night (8pm - 11pm)</option>
					  </select>
					</div>
					<h3>2. Select your activity</h3>
					<div class="selects">
					  <select id="presets" onChange="enable();">
					    <option value="0">Select</option>
					    <option value="1">Studying</option>
					    <option value="2">Eating</option>
					    <option value="3">Relaxing</option>
					    <option value="4">Singing</option>
					    <option value="5">Sleeping</option>
					  </select>
					</div>
					<ul>
						<li><h3>3. Please input the values corresponding to your needs </h3></li>
						<li>Loudness (0 - 100 being the noisiest) : <br><input type="text" name="FirstName" value="" id="loudness"></li>
						<li>Brightness (0 - 100 being brightest) : <br><input type="text" name="FirstName" value="" id="brightness"></li>
						<li>Air Quality (50 - 100 being the lowest air quality):<br> <input type="text" name="FirstName" value="" id="quality"></li>
						<li>Crowdness (0 - 100 having the largest crowd density) : <br> <input type="text" name="FirstName" value="" id="crowd"></li>
						<li>
							<a href="#rec">
								<div class="button"  onclick="myFunction()">Recommend Me!</div>
							</a>
						</li>
					</ul>
				</div>

			
		</div>

		<!--content(e)-->
		<div id="rec">
			 <span> Recommendation: </span>
			 <div><h5 id = "place">-Tisch Library B1 -</h5>
			 	<h4 id = "tod"> Morning </h4>
			 <p id = "description">
			 Good lighting (lightness level between 65 - 75)<br>
			 Small Crowd at this time (3pm - 6pm)<br>
			</p>
			</div>
			<iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d11784.04527380905!2d-71.118877!3d42.406204!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x46a463527f2c5835!2sTisch+Library!5e0!3m2!1sen!2sus!4v1544814873325" style="height: 360px;" >
			</iframe>
		</div>

	<!--wrap(e)-->
  
	<script>
		//BOS5741: 0, BOS5744: 1, TLIBB: 2, TLIB1: 3, CC1: 4, CC2: 5, LML: 6, SEC1: 7, SEC2: 8, EPDC: 9, ECL: 10
		//MORNING: 0, LUNCH: 1, AFTERNOON: 2, EVENING: 3, NIGHT: 4
	var loudness = [1000000, 1000000, 1000000, 0, 34.285,
		    1000000, 1000000, 1000000, 25.397, 16.508,
		    10.514, 1000000, 5.638, 17.778, 18.895,
		    44.127, 1000000, 9.0997, 35.556, 9.615,
		    86.349, 1000000, 75.873, 98.095, 49.234,
		    84.535, 1000000, 73.288, 36.317, 42.4127,
		    5.079, 1000000, 1000000, 0, 0,
		    26.123, 43.901, 1000000, 2.540, 33.854,
		    16.076, 46.222, 1000000, 0, 25.034,
		    27.505, 72.813, 1000000, 0, 30.131,
		    29.384, 1000000, 1000000, 41.143, 5.8413];

	var light = [1000000, 1000000, 1000000, 14.621, 18.242,
		    1000000, 1000000, 1000000, 30.972, 10.0234,
		    58.021, 1000000, 42.626, 50.929, 28.701,
		    84.003, 1000000, 13.805, 12.07, 17.34,
		    100, 1000000, 18.8201, 8.1763, 6.7274,
		    31.886, 1000000, 6.846, 7.167, 6.604,
		    14.9724, 1000000, 1000000, 13.44, 11.757,
		    15.269, 100, 1000000, 11.483, 26.942,
		    26.2, 23.355, 1000000, 25.322, 12.616,
		    27.0636, 21.097, 1000000, 50.577, 58.021,
		    19.8, 1000000, 1000000, 8.1117, 6.581];

	var crowd = [1000000, 1000000, 1000000, 20.410, 3.711,
		    1000000, 1000000, 1000000, 43.262, 0.488,
		    8.887, 1000000, 34.766, 16.699, 13.184,
		    19.531, 1000000, 83.691, 28.223, 60.254,
		    37.305, 1000000, 97.266, 68.75, 67.578,
		    78.125, 1000000, 91.99, 37.793, 53.809,
		    33.691, 1000000, 1000000, 50.635, 37.109,
		    16.406, 34.082, 1000000, 73.047, 22.949,
		    11.914, 35.645, 1000000, 33.594, 50.488,
		    10.938, 25.195, 1000000, 22.324, 25.977,
		    93.75, 1000000, 1000000, 8.789, 69.238];

	var qlity = [1000000, 1000000, 1000000, 57.85, 93.33,
		    1000000, 1000000, 1000000, 63.15, 82.708,
		    67.917, 1000000, 72.833, 73.333, 74.725,
		    62, 1000000, 70.953, 75.417, 76.917,
		    70.25, 1000000, 74.167, 67.917, 96.417,
		    74.167, 1000000, 74.725, 70.833, 66.167,
		    100, 1000000, 1000000, 65.833, 66.25,
		    61.072, 62.167, 1000000, 63.683, 86.667,
		    67.639, 67.167, 1000000, 63.892, 78.333,
		    62.225, 57.917, 1000000, 64.167, 73.333,
		    71.667, 1000000, 1000000, 97.5, 88.33];

	function myFunction() {
	  var ld = document.getElementById("loudness");
	  var qlty = document.getElementById("quality");
	  var crwd = document.getElementById("crowd");
	  var lux = document.getElementById("brightness");
	  var time = document.getElementById("time");
	  var arrval = [];
	  if (checkstrint (ld.value, arrval) || checkstrint(qlty.value, arrval) || checkstrint (lux.value, arrval) || checkstrint(crwd.value, arrval) || (arrval.every(function (x){return x == -1;}))){
	  	return;
	  }
	  if (time.selectedIndex == 0){
	  	var index;
	  	var loca = [];
	  	var value = 0;
	  	for (i = 0; i < 55; i++){
	  		value = 0;
	  		value = sq(value, arrval[0], loudness, i);
	  		value = sq(value, arrval[1], qlity, i);
	  		value = sq(value, arrval[2], light, i);
	  		value = sq(value, arrval[3], crowd, i);
	  		loca.push(value);
	  	}
	  	index = minIndex(loca);
	  	var location = Math.floor(index / 5);
	  	var tod = index % 5;
	  	console.log(location);
	  } else {
	  	var tod = time.selectedIndex - 1;
	  	var index;
	  	var loca = [];
	  	var value = 0;
	  	for (i = 0; i < 11; i++){
	  		index = i * 5 + tod;
	  		value = 0;
	  		value = sq(value, arrval[0], loudness, index);
	  		value = sq(value, arrval[1], qlity, index);
	  		value = sq(value, arrval[2], light, index);
	  		value = sq(value, arrval[3], crowd, index);
	  		loca.push(value);
	  	}
	  	var location = minIndex (loca);
	  }
	  switch (location){
	  	case 0:
	  		document.getElementById("place").textContent = "574 Boston Avenue Entrance";
	  		break;
	  	case 1:
	  		document.getElementById("place").textContent = "574 Boston Avenue 4th Floor";
	  		break;
	  	case 2:

	  		document.getElementById("place").textContent = "Tisch Library Basement";
	  		break;
	  	case 3:

	  		document.getElementById("place").textContent = "Tisch Library First Floor";
	  		break;
	  	case 4:
	  		document.getElementById("place").textContent = "Campus Center The Commons";
	  		break;
	  	case 5: 
	  		document.getElementById("place").textContent = "Campus Center The Rez";
	  		break;
	  	case 6:
	  		document.getElementById("place").textContent = "Lilly Music Library";
	  		break;
	  	case 7:
	  		document.getElementById("place").textContent = "Kindlevan Cafe at SEC";
	  		break;
	  	case 8: 
	  		document.getElementById("place").textContent = "Science and Engineering Complex 2nd Floor";
	  		break;
	  	case 9:
	  		document.getElementById("place").textContent = "Engineering Project Development Center";
	  		break;
	  	case 10:
	  		document.getElementById("place").textContent = "Eaton Computer Laboratory";

	  }
	  switch (tod){
	  	case 0:
	  		document.getElementById("tod").textContent = "Morning";
	  		break;
	  	case 1:
	  		document.getElementById("tod").textContent = "Lunch";
	  		break;
	  	case 2:

	  		document.getElementById("tod").textContent = "Afternoon";
	  		break;
	  	case 3:

	  		document.getElementById("tod").textContent = "Evening";
	  		break;
	  	case 4:
	  		document.getElementById("tod").textContent = "Night";
	  		break;

	  }

		//BOS5741: 0, BOS5744: 1, TLIBB: 2, TLIB1: 3, CC1: 4, CC2: 5, LML: 6, SEC1: 7, SEC2: 8, EPDC: 9, ECL: 10

	  document.getElementById("rec").style.display = "block";

	}
	function sq(valsum, val, array, index){
		if (val != -1){
			return valsum + ((val - array[index]) * (val - array[index]));
		} else {
			return valsum;
		}
	}
	function minIndex (arr){
        	var min = 100000000;
        	var minInd = 0;
        	for (i = 0; i < arr.length; i++){
                	if (arr[i] < min){
                        	min = arr[i];
                        	minInd = i;
                	}
        	}
        	return minInd;
	}

	function checkstrint(txt, arrval){
        	for (i = 0; i<txt.length; i++){
                	if ((txt[i].charCodeAt() < 48) || (txt[i].charCodeAt()>57)){
                        	alert("Some value is not a positive integer");
                        	return 1;
                	}
        	}
        	if(parseInt(txt) > 100){
        		alert("Some value above 100");
        		return 1;
        	} else if (txt.length == 0){
        		arrval.push(-1);
        	} else {
        		arrval.push(parseInt(txt));
        	}
        	return 0;
	}
	</script>

					
 </body>
</html>
